<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SafeSphere ‚Äì Women Safety App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 15px;
      background: #fff5f7;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #c2185b;
    }

    section {
      background: #ffffff;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #c2185b;
      color: white;
      cursor: pointer;
    }

    button.secondary {
      background: #6a1b9a;
    }

    textarea {
      width: 100%;
      height: 80px;
      border-radius: 8px;
      padding: 10px;
      border: 1px solid #ccc;
      resize: none;
    }

    ul {
      padding-left: 20px;
    }

    .offline {
      text-align: center;
      font-size: 14px;
      color: red;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

  <h1>SafeSphere</h1>
  <p style="text-align:center;">Single-Page Women Safety Web App (Offline-Friendly)</p>

  <div id="offlineStatus" class="offline"></div>

  <!-- SOS CALL -->
  <section>
    <h3>üö® Emergency SOS Call</h3>
    <button onclick="makeCall()">Call Women Helpline</button>
  </section>

  <!-- SHARE LOCATION -->
  <section>
    <h3>üìç Share Live Location</h3>
    <button class="secondary" onclick="shareLocation()">Share My Location</button>
    <p style="font-size:13px;">Requires GPS enabled. Permission will be requested.</p>
  </section>

  <!-- SOS SMS -->
  <section>
    <h3>üì© SOS SMS Alert</h3>
    <button onclick="sendSMS()">Send Emergency SMS</button>
  </section>

  <!-- INCIDENT REPORT -->
  <section>
    <h3>üìù Store Safety Report (Offline)</h3>
    <textarea id="reportText" placeholder="Describe the incident..."></textarea>
    <button onclick="saveReport()">Save Report</button>
    <p id="reportStatus" style="font-size:13px;"></p>
  </section>

  <!-- HELPLINES -->
  <section>
    <h3>üìû West Bengal Women Safety Helplines</h3>
    <ul>
      <li>Women Helpline (WB): <strong>1091</strong></li>
      <li>Police Emergency: <strong>112</strong></li>
      <li>Kolkata Police Women Helpline: <strong>1090</strong></li>
      <li>Child & Women Safety: <strong>181</strong></li>
    </ul>
  </section>

  <!-- SAFETY TIPS -->
  <section>
    <h3>üõ°Ô∏è Safety Tips</h3>
    <ul>
      <li>Trust your instincts</li>
      <li>Share location with trusted contacts</li>
      <li>Avoid isolated areas at night</li>
      <li>Keep emergency numbers accessible</li>
    </ul>
  </section>

  <script>
    // Offline indicator
    function updateOnlineStatus() {
      const status = document.getElementById("offlineStatus");
      if (!navigator.onLine) {
        status.textContent = "‚ö†Ô∏è You are offline. App still works.";
      } else {
        status.textContent = "";
      }
    }
    window.addEventListener("load", updateOnlineStatus);
    window.addEventListener("online", updateOnlineStatus);
    window.addEventListener("offline", updateOnlineStatus);

    // SOS Call
    function makeCall() {
      window.location.href = "tel:1091";
    }

    // SOS SMS
    function sendSMS() {
      const message = "I am in danger. Please help me immediately.";
      window.location.href = "sms:1091?body=" + encodeURIComponent(message);
    }

    // Share Live Location (PERMISSION ON CLICK)
    function shareLocation() {
      if (!navigator.geolocation) {
        alert("Geolocation is not supported on this device.");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        function (position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;

          const mapsLink = "https://www.google.com/maps?q=" + lat + "," + lon;
          const message = "I need help. My current location: " + mapsLink;

          if (navigator.share) {
            navigator.share({
              title: "Emergency Location",
              text: message
            });
          } else {
            window.location.href = "sms:?body=" + encodeURIComponent(message);
          }
        },
        function (error) {
          alert("Location permission denied or GPS disabled.");
        }
      );
    }

    // Save Report Offline
    function saveReport() {
      const text = document.getElementById("reportText").value;
      if (!text.trim()) {
        alert("Please write something.");
        return;
      }
      localStorage.setItem("safetyReport", text);
      document.getElementById("reportStatus").textContent =
        "Report saved locally on this device.";
      document.getElementById("reportText").value = "";
    }
  </script>

</body>
</html>